<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-DAV/lab-4" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Lab 4 | IEEE at UCLA Project Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://projects.ieeebruins.com/DAV/lab-4"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Lab 4 | IEEE at UCLA Project Docs"><meta data-rh="true" name="description" content="Graphic Design Is My Passion"><meta data-rh="true" property="og:description" content="Graphic Design Is My Passion"><link data-rh="true" rel="icon" href="/img/logo_ieee.svg"><link data-rh="true" rel="canonical" href="https://projects.ieeebruins.com/DAV/lab-4"><link data-rh="true" rel="alternate" href="https://projects.ieeebruins.com/DAV/lab-4" hreflang="en"><link data-rh="true" rel="alternate" href="https://projects.ieeebruins.com/DAV/lab-4" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.f0de6f11.css">
<script src="/assets/js/runtime~main.dd1d4ac2.js" defer="defer"></script>
<script src="/assets/js/main.3701f744.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_ieee.svg" alt="IEEE Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo_ieee.svg" alt="IEEE Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">IEEE at UCLA Project Docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Docs</a><a href="https://ieeebruins.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">ieeebruins.com<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Welcome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/micromouse/">Micromouse</a><button aria-label="Expand sidebar category &#x27;Micromouse&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/pocket-racers/">Pocket Racers</a><button aria-label="Expand sidebar category &#x27;Pocket Racers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/DAV/">DAV</a><button aria-label="Collapse sidebar category &#x27;DAV&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/DAV/lab-1">Lab 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/DAV/lab-2">Lab 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/DAV/lab-3">Lab 3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/DAV/lab-4">Lab 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/DAV/lab-5">Lab 5</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/WRAP/">WRAP</a><button aria-label="Expand sidebar category &#x27;WRAP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/DAV/"><span itemprop="name">DAV</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Lab 4</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Lab 4</h1>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="graphic-design-is-my-passion">Graphic Design Is My Passion<a href="#graphic-design-is-my-passion" class="hash-link" aria-label="Direct link to Graphic Design Is My Passion" title="Direct link to Graphic Design Is My Passion">​</a></h3>
<ul>
<li><a href="#1-vgarbage">1: VGArbage</a>
<ul>
<li><a href="#11-the-vga-constants">1.1: The VGA Constants</a></li>
<li><a href="#12-the-pixel-counters">1.2: The Pixel Counters</a></li>
<li><a href="#13-hsync-and-vsync">1.3: hsync and vsynv</a></li>
<li><a href="#14-the-pixel-color">1.4: The Pixel Color</a></li>
<li><a href="#15-the-top-level">1.5: The Top Level</a></li>
</ul>
</li>
<li><a href="#2-i-cant-win">2: I Can&#x27;t Win</a></li>
<li><a href="#3-graphic-design-will-be-your-passion-too">3: Graphic Design Will Be Your Passion Too</a></li>
<li><a href="#extra-credit">?: Extra Credit</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>In Lecture 5, we covered the basics behind how a VGA works as well as some practices to keep in mind when you’re working with your VGA. This lab will have you implement those practices in a way where you can use your code in your final capstone project. Today, you’ll learn how writing to the VGA works, implement ping-pong RAM, and for some extra credit, basic blocking to implement a static image.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources-and-reference-material">Resources and Reference Material<a href="#resources-and-reference-material" class="hash-link" aria-label="Direct link to Resources and Reference Material" title="Direct link to Resources and Reference Material">​</a></h2>
<p>Link to Lecture 5</p>
<p><a href="https://docs.google.com/spreadsheets/d/1jTgphR61ozrNZlr9dLvId5t3o0FrikxSZWwAvhXF0Yo/edit#gid=0" target="_blank" rel="noopener noreferrer">Pin Sheet</a></p>
<p><a href="https://docs.google.com/document/d/1_8ruatZIb3sZb-3Kk3WOYC8Jzv4HvdwrTPZUGVupdVE/edit" target="_blank" rel="noopener noreferrer">Verilog Docs and FAQs</a></p>
<p><a href="https://github.com/amidthestars/DAV-Outreach-Module-Solutions" target="_blank" rel="noopener noreferrer">Solution</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contact-us">Contact Us<a href="#contact-us" class="hash-link" aria-label="Direct link to Contact Us" title="Direct link to Contact Us">​</a></h2>
<p>You can contact the DAV leads on Discord.</p>
<p><strong>Claire Huang</strong> (Discord: <em>zhiyujia</em>)<br>
<strong>Premkumar Giridhar</strong> (Discord: <em>8bitrobot</em>)</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-vgarbage">1 VGArbage<a href="#1-vgarbage" class="hash-link" aria-label="Direct link to 1 VGArbage" title="Direct link to 1 VGArbage">​</a></h2>
<p>To get started, <a href="https://drive.google.com/file/d/1hvoNzdLyxhBUwM9_1KTYdDiDnigi52x9/view?usp=sharing" target="_blank" rel="noopener noreferrer">we’ve provided a skeleton for you</a>.</p>
<p>You’ll observe that the gist of the VGA is mostly counters and some combinational logic. You keep track of where you currently are on the VGA using some counters in the sequential block (and some related <code>localparams</code>), and what actually displays on that part of the VGA is determined in the combinational block.</p>
<p>Your job now is to fill out the skeleton. We’ve labeled the four parts as <strong>TODO(1), TODO(2), TODO(3), TODO(4)</strong> for your reference. The actual tasks should be fairly straightforward (and they’re outlined in the skeleton!), but we’ll describe them in this lab spec as well for completeness.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-the-vga-constants">1.1 The VGA Constants<a href="#11-the-vga-constants" class="hash-link" aria-label="Direct link to 1.1 The VGA Constants" title="Direct link to 1.1 The VGA Constants">​</a></h3>
<p>Here, you’re presented with 8 constants that you need to find the values for. You can easily find these numbers by Googling <em>“VGA timing spec”</em> or similar. You can also find them in our lecture slides :-)</p>
<p>Just keep in mind what each one is conceptually – you’ll need them later!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-the-pixel-counters">1.2 The Pixel Counters<a href="#12-the-pixel-counters" class="hash-link" aria-label="Direct link to 1.2 The Pixel Counters" title="Direct link to 1.2 The Pixel Counters">​</a></h3>
<p>The pixel counters are the brain behind the VGA driver, and the sequential block triggered on the edge of our VGA clock is where we update them. If the reset button is pressed, you need to reset these counters to zero. Otherwise, you should increment the appropriate counter. The logic for counter increments is fairly straightforward – increment the horizontal counter <code>hc</code>, and if it gets too high, increment <code>vc</code> and set <code>hc</code> back to zero. You’ll need to use the parameters you defined earlier to figure out at what value of <code>hc</code> you need to move to the next line.</p>
<p>Also, keep in mind that <code>hc</code> and <code>vc</code> are zero-indexed when writing your conditions for incrementing them! If <code>hc</code> equals 800 at any point, you did something wrong :-)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-hsync-and-vsync">1.3 <code>hsync</code> and <code>vsync</code><a href="#13-hsync-and-vsync" class="hash-link" aria-label="Direct link to 13-hsync-and-vsync" title="Direct link to 13-hsync-and-vsync">​</a></h3>
<p>Here, you’ll combinationally generate the <code>hsync</code> and <code>vsync</code> signals using the counter values. The parameters we defined earlier will come in handy here. Remember two things when figuring out the assignments:</p>
<ul>
<li><code>hsync</code> and <code>vsync</code> should be HIGH for most of the time and driven LOW during the specific period within the blanking interval</li>
<li>the duration of <code>hsync</code> and <code>vsync</code> is susceptible to off-by-one errors – make sure to double-check your conditions!</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="14-the-pixel-color">1.4 The Pixel Color<a href="#14-the-pixel-color" class="hash-link" aria-label="Direct link to 1.4 The Pixel Color" title="Direct link to 1.4 The Pixel Color">​</a></h3>
<p>Finally, you’ll use a combinational block to assign the pixel color outputs <code>red</code>, <code>green</code>, and <code>blue</code>. Remember to assign all the colors to 0 during blanking intervals and resets – otherwise, just assign the color values inputted via <code>input_red</code>, <code>input_green</code>, and <code>input_blue</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="15-the-top-level">1.5 The Top Level<a href="#15-the-top-level" class="hash-link" aria-label="Direct link to 1.5 The Top Level" title="Direct link to 1.5 The Top Level">​</a></h3>
<p>This isn’t labeled in the skeleton because you need to make it yourself, but in addition to filling out the VGA skeleton, you need a top level to drive it. This will include the following tasks:</p>
<ul>
<li>Creating and instantiating a 25 MHz clock using a PLL</li>
<li>Instantiating the VGA module</li>
<li>Pin planning!</li>
</ul>
<p>It’ll be fairly obvious if your module is working as expected, so you <em>probably</em> don’t need to testbench for this one. But if you’re having weird timing issues and can’t figure out why, there’s nothing a testbench can’t help you figure out!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-i-cant-win">2 I Can’t Win<a href="#2-i-cant-win" class="hash-link" aria-label="Direct link to 2 I Can’t Win" title="Direct link to 2 I Can’t Win">​</a></h2>
<p>In this section, you’ll be implementing ping-pong RAM. If you recall from lecture, ping-pong RAM is a technique where our VGA reads from one memory buffer while our graphics driver writes to the other. This prevents the VGA from having its image change while it’s being read – a very common source of screen-tearing.</p>
<p>To implement this, it might be easier to first create the RAM as two arrays of registers, with one byte for each pixel on the screen (now you see why we used 8-bit color?). Once we have this working, we’ll replace the arrays with RAM IPs.</p>
<p>For this module, you should take in the following inputs:</p>
<ul>
<li>A clock, to allow synchronous changes of the read and write RAM,</li>
<li>The address to write at, or <code>addrWrite</code>. This is dependent on the size of your array.</li>
<li>Two values for <code>addrRead_h</code> and <code>addrRead_v</code>, which can be taken from your VGA module (remember the counters <code>hc</code> and <code>vc</code>?),</li>
<li>And the data to write, or <code>dataWrite</code>. The size of this is dependent on the size of your colors - if your red, green, and blue pixels are 4 bits each, this will be 12 bits.</li>
</ul>
<p>Your module should output whatever was at the read address.</p>
<p>Now for the actual ping pong part. To switch the two RAMs, you can instantiate a 1 bit <code>writeEnable</code> register. Then, when <code>addrRead_h</code> and <code>addrRead_v</code> both reach zero (a.k.a. the start of the frame), the <code>writeEnable</code> register can be flipped. Make sure that the flipping is done sequentially, to keep everything in sync. In the combinational block, the selection of which RAM buffer to read/write can be determined based on <code>writeEnable</code>, and this address can be used to read the data out to the VGA module. That means that this ping pong RAM module will need to be instantiated in the top level where you instantiated your VGA module.</p>
<p>Wow, that was a lot. What do you even do with this ping pong RAM?</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-graphic-design-will-be-your-passion-too">3 Graphic Design Will Be Your Passion Too<a href="#3-graphic-design-will-be-your-passion-too" class="hash-link" aria-label="Direct link to 3 Graphic Design Will Be Your Passion Too" title="Direct link to 3 Graphic Design Will Be Your Passion Too">​</a></h2>
<p>To encourage best practices, you’ll implement a very basic graphics module too. Don’t worry, you can just hardcode this part for now. This is just to show you a structure you can use for your final capstone project.</p>
<p>This graphics module will also be implemented in the same top level as the other two modules. The gist of this module is that you supply it with an address and it tells you what color you need to put in your ping pong RAM, which will get sent to the VGA.</p>
<p>In the graphics module, you’ll want to take in the horizontal and vertical position (you can keep it as the HSYNC and VSYNC outputs from the VGA for now).</p>
<p>The module should output the following:</p>
<ul>
<li>The color to be sent to the ping pong RAM,</li>
<li>And the address to read/write from in the ping pong RAM.</li>
</ul>
<p>(All of this is combinational, so there’s no clock involved in this one!)</p>
<p>To calculate the address - if the horizontal and vertical position are in the blanking interval, set the address to 0. Otherwise, you can find the address by calculating vertical position * (number of pixels in a row) + horizontal position.</p>
<p>To calculate the color, you can just hard code it to return a certain color if it’s not in the blanking interval. If the horizontal and vertical positions are within the blanking interval, then the color should be all 0’s.</p>
<p>Now, it’s a matter of wiring up the inputs and outputs from the modules you created, and now you have a VGA using ping pong RAM!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-extra-credit">? Extra credit<a href="#-extra-credit" class="hash-link" aria-label="Direct link to ? Extra credit" title="Direct link to ? Extra credit">​</a></h2>
<p>If you want to go above and beyond on this lab, here’s a little exercise that will introduce you to blocking.</p>
<p>Your job is to display this lad (shown below) on your VGA!</p>
<p><img loading="lazy" alt="alt_text" src="/assets/images/image7-13576d69119961b4b89675d2d1d81476.png" width="438" height="468" class="img_ev3q"></p>
<p>Remember that graphics module you created? You could in theory use the vertical position and horizontal position to specify a position within an array, and that array can be encoded with certain colors at each index. Then, you can just grab the color out of that array and pass it to the ping pong RAM, and everything will work like it did before.</p>
<p>However! If we continued just like that, this mushroom would be very, very small. Each square would only be one pixel! What if we want to make this larger?</p>
<p>Well, we can implement a technique called blocking! In the top level, you can assign some wires to be a smaller version of the horizontal position and vertical position.</p>
<div class="language-verilog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-verilog codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// horizontal_position ranges from 0 to 799</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// vertical_position ranges from 0 t0 525</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// x ranges from 0 to 39  (image width is 32px)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">assign</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> horizontal_position </span><span class="token operator" style="color:rgb(12, 150, 155)">/</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">20</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// y ranges from 0 to 26 (image height is 24px)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">assign</span><span class="token plain"> y </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> vertical_position </span><span class="token operator" style="color:rgb(12, 150, 155)">/</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">20</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For the 16x16px image given above, your division factors will have to be slightly different.</p>
<p>Of course, this does mean that you will need to adjust your conditions in your graphics module to the new boundaries (where is the new blanking interval?). Once you’ve done that, though, you can use x and y as the address to your array or RAM and pull the color out that way. Then, everything else is the same as it was before!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/UCLA-IEEE/projects.ieeebruins.com/tree/main/docs/DAV/lab-4.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/DAV/lab-3"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Lab 3</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/DAV/lab-5"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Lab 5</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#graphic-design-is-my-passion" class="table-of-contents__link toc-highlight">Graphic Design Is My Passion</a></li><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#resources-and-reference-material" class="table-of-contents__link toc-highlight">Resources and Reference Material</a></li><li><a href="#contact-us" class="table-of-contents__link toc-highlight">Contact Us</a></li><li><a href="#1-vgarbage" class="table-of-contents__link toc-highlight">1 VGArbage</a><ul><li><a href="#11-the-vga-constants" class="table-of-contents__link toc-highlight">1.1 The VGA Constants</a></li><li><a href="#12-the-pixel-counters" class="table-of-contents__link toc-highlight">1.2 The Pixel Counters</a></li><li><a href="#13-hsync-and-vsync" class="table-of-contents__link toc-highlight">1.3 <code>hsync</code> and <code>vsync</code></a></li><li><a href="#14-the-pixel-color" class="table-of-contents__link toc-highlight">1.4 The Pixel Color</a></li><li><a href="#15-the-top-level" class="table-of-contents__link toc-highlight">1.5 The Top Level</a></li></ul></li><li><a href="#2-i-cant-win" class="table-of-contents__link toc-highlight">2 I Can’t Win</a></li><li><a href="#3-graphic-design-will-be-your-passion-too" class="table-of-contents__link toc-highlight">3 Graphic Design Will Be Your Passion Too</a></li><li><a href="#-extra-credit" class="table-of-contents__link toc-highlight">? Extra credit</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More of us!</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/RREtsea" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://instagram.com/uclaieee" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"> © 2025 IEEE at UCLA. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>