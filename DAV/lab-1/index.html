<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-DAV/lab-1" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Lab 1 | IEEE at UCLA Project Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://projects.ieeebruins.com/DAV/lab-1"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Lab 1 | IEEE at UCLA Project Docs"><meta data-rh="true" name="description" content="Cooking Math"><meta data-rh="true" property="og:description" content="Cooking Math"><link data-rh="true" rel="icon" href="/img/logo_ieee.svg"><link data-rh="true" rel="canonical" href="https://projects.ieeebruins.com/DAV/lab-1"><link data-rh="true" rel="alternate" href="https://projects.ieeebruins.com/DAV/lab-1" hreflang="en"><link data-rh="true" rel="alternate" href="https://projects.ieeebruins.com/DAV/lab-1" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.18354a95.css">
<script src="/assets/js/runtime~main.62184d40.js" defer="defer"></script>
<script src="/assets/js/main.46815c93.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_ieee.svg" alt="IEEE Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo_ieee.svg" alt="IEEE Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">IEEE at UCLA Project Docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Docs</a><a href="https://ieeebruins.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">ieeebruins.com<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Welcome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/micromouse/">Micromouse</a><button aria-label="Expand sidebar category &#x27;Micromouse&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/pocket-racers/">Pocket Racers</a><button aria-label="Expand sidebar category &#x27;Pocket Racers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/DAV/">DAV</a><button aria-label="Collapse sidebar category &#x27;DAV&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/DAV/lab-1">Lab 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/DAV/lab-2">Lab 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/DAV/lab-3">Lab 3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/DAV/lab-4">Lab 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/DAV/lab-5">Lab 5</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/WRAP/">WRAP</a><button aria-label="Expand sidebar category &#x27;WRAP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/DAV/"><span itemprop="name">DAV</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Lab 1</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Lab 1</h1>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cooking-math">Cooking Math<a href="#cooking-math" class="hash-link" aria-label="Direct link to Cooking Math" title="Direct link to Cooking Math">​</a></h3>
<ul>
<li><a href="#0-your-first-module">0 Your First Module</a>
<ul>
<li><a href="#01-the-top-level">0.1 The Top Level</a></li>
<li><a href="#02-the-testbench">0.2 The Testbench</a></li>
<li><a href="#03-pin-planning">0.3 Pin Planning</a></li>
</ul>
</li>
<li><a href="#1-is-that-alu-can-say">1 Is That ALU Can Say?</a>
<ul>
<li><a href="#11-the-mini-alu">1.1 The (mini) ALU</a></li>
<li><a href="#12-the-testbench-again">1.2 The Testbench (again)</a></li>
</ul>
</li>
<li><a href="#2-twas-segment-to-be">2 &#x27;Twas Segment to Be</a>
<ul>
<li><a href="#21-the-seven-segment-digit">2.1 The Seven-Segment Digit</a></li>
<li><a href="#22-the-seven-segment-display">2.2 The Seven-Segment Display</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>Welcome to DAV! By this point, you’ve probably attended or watched the first lecture where we talked about the project and gave a high-level conceptual overview of logic design. Now, it’s time to try your hand at Verilog for the first time by making a (very) basic calculator on your FPGA. In the digital world, we refer to such circuits as “arithmetic logic units,” or ALUs.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources-and-reference-material">Resources and Reference Material<a href="#resources-and-reference-material" class="hash-link" aria-label="Direct link to Resources and Reference Material" title="Direct link to Resources and Reference Material">​</a></h2>
<p><a href="https://drive.google.com/file/d/16LD_dYyo49NGHnih-ArGze99MuCCs8L4/view?usp=share_link" target="_blank" rel="noopener noreferrer">Link to Lecture 1</a></p>
<p><a href="https://drive.google.com/file/d/12Pz_-xRepHj60k03G1PzrEOOhTwyxwga/view?usp=drive_link" target="_blank" rel="noopener noreferrer">Link to Workshop 1</a></p>
<p><a href="https://docs.google.com/spreadsheets/d/1jTgphR61ozrNZlr9dLvId5t3o0FrikxSZWwAvhXF0Yo/edit#gid=0" target="_blank" rel="noopener noreferrer">Pin Sheet</a></p>
<p><a href="https://docs.google.com/document/d/1_8ruatZIb3sZb-3Kk3WOYC8Jzv4HvdwrTPZUGVupdVE/edit" target="_blank" rel="noopener noreferrer">Verilog Docs and FAQ</a></p>
<p><a href="https://github.com/amidthestars/DAV-Outreach-Module-Solutions" target="_blank" rel="noopener noreferrer">Solution</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contact-us">Contact Us<a href="#contact-us" class="hash-link" aria-label="Direct link to Contact Us" title="Direct link to Contact Us">​</a></h2>
<p>You can contact the DAV leads on Discord.</p>
<p><strong>Claire Huang</strong> (Discord: <em>zhiyujia</em>)<br>
<strong>Premkumar Giridhar</strong> (Discord: <em>8bitrobot</em>)</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0-your-first-module">0 Your First Module<a href="#0-your-first-module" class="hash-link" aria-label="Direct link to 0 Your First Module" title="Direct link to 0 Your First Module">​</a></h2>
<p>Your first module for the FPGA calculator will be a very basic top-level module. As we go on, we’ll add things to this module, but for now your task is to control the LEDs with the switches in a very specific way: each switch will light up the LED directly above it.</p>
<p><strong>Section 0</strong> of this lab will be completed <strong>live during the workshop</strong> and the code will be made available. However, if you can’t make it or you want to try it yourself, you’ll have access to a recording that you can use to work through the lab. There will be <strong>no checkoffs</strong> for this section of the lab; however, you’ll still need to show us your working LEDs, so make sure you get it done! This part of the lab is by no means difficult; it’s simply an opportunity to become more familiar with Quartus.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="01-the-top-level">0.1 The Top Level<a href="#01-the-top-level" class="hash-link" aria-label="Direct link to 0.1 The Top Level" title="Direct link to 0.1 The Top Level">​</a></h3>
<p>Firstly, <strong>create a new project</strong> – instructions are in the workshop slides. Then, <strong>create a file</strong> named <code>miniALU_top.sv</code>.</p>
<p>Inside, you need to define the module and its ports – the syntax is provided in the Verilog docs linked at the top of the spec. We want our FPGA to process the <strong>switches as inputs</strong> and produce <strong>outputs on the LEDs</strong>. There are 10 switches and 10 LEDs, each representing a single binary value (up or down, on or off). Think about what ports you need to define to allow the module to use them. (If you feel like you need to define 20 individual ports, rest assured that it’s unnecessary. There’s a better way to consolidate those ports together!)</p>
<p>Finally, now that you have your ports, you need to somehow “connect” the switches to the LEDs. There’s a <strong>single Verilog statement</strong> you can use for connecting wires in the manner described above – if you can’t figure it out, refer to our docs!</p>
<p>That’s all there is to it! This module should be at most 10 lines long. Next, you’ll determine whether it actually works.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="02-the-testbench">0.2 The Testbench<a href="#02-the-testbench" class="hash-link" aria-label="Direct link to 0.2 The Testbench" title="Direct link to 0.2 The Testbench">​</a></h3>
<p>That’s right, it’s time for everyone’s favorite part of digital design: testbenching! Let’s write a testbench that confirms that our switch input gets mapped correctly to our LED output. Create a file named <code>miniALU_tb.sv</code> and set it as the top-level module.</p>
<p>A testbench, like any other module, uses the <code>module/endmodule</code> syntax for declaration. However, as the first line of any testbench, you must include the following line:</p>
<div class="language-verilog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-verilog codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">timescale </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">ns</span><span class="token operator" style="color:rgb(12, 150, 155)">/</span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">ns</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is a directive that QuestaSim, our simulation software, uses to determine the duration of “simulation time” units relative to “delay time” units, as well as a degree of precision. The details aren’t too important right now, so you can just copy-paste as written above. If you’re curious and want to read more, <a href="https://www.chipverify.com/verilog/verilog-timescale" target="_blank" rel="noopener noreferrer">click here</a>.</p>
<p><strong>Define a module</strong> named <code>miniALU_tb</code> that has <strong>no input ports</strong> and whose <strong>outputs are the LEDs</strong>. (Like before, you don’t need 10 ports for this.) You’ll need to create a <code>reg</code> for your simulated switches. Inside the module, instantiate <code>miniALU_top</code> and pass in your switches and LED output port accordingly.</p>
<p>Remember that testbenches are less like digital circuit modules and more like simple scripts. Verilog code inside the <code>initial</code> block runs **sequentially **and the timing is determined by your use of delays. The workshop will go into more detail about what exactly this means and how to use these delays and the <code>initial</code> block to write a testbench. Though you don’t need to submit anything here for checkoffs, you’ll be writing your own testbench later on, so ask us questions if you don’t understand it!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="03-pin-planning">0.3 Pin Planning<a href="#03-pin-planning" class="hash-link" aria-label="Direct link to 0.3 Pin Planning" title="Direct link to 0.3 Pin Planning">​</a></h3>
<p>Now that you’ve verified your design in simulation, it’s time to upload it to the FPGA and see if it really works. Set <code>miniALU_top.sv</code> as the top level and run Synthesis again.</p>
<p>Now, open the Pin Planner. It should list your top-level I/O ports at the bottom below a large grid of colors and shapes. Ignore the grid and refer to the <a href="https://docs.google.com/spreadsheets/d/1jTgphR61ozrNZlr9dLvId5t3o0FrikxSZWwAvhXF0Yo/edit#gid=0" target="_blank" rel="noopener noreferrer">Pin Sheet</a> to map your pins. More detailed instructions are provided in the workshop.</p>
<p>Once you’ve done that, run the Fitter and Assembler, then program your FPGA. If all is well, each switch should be able to control the LED above it!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-is-that-alu-can-say">1 Is That ALU Can Say?<a href="#1-is-that-alu-can-say" class="hash-link" aria-label="Direct link to 1 Is That ALU Can Say?" title="Direct link to 1 Is That ALU Can Say?">​</a></h2>
<p>This section of the lab will teach you how to implement the core module that will perform the calculations: <strong>the Arithmetic Logic Unit, or ALU</strong>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-the-mini-alu">1.1 The (mini) ALU<a href="#11-the-mini-alu" class="hash-link" aria-label="Direct link to 1.1 The (mini) ALU" title="Direct link to 1.1 The (mini) ALU">​</a></h3>
<p>In this module, you’ll implement a very **basic ALU **that performs two operations. It will take two <strong>4-bit numbers</strong> and a <strong>select line as input</strong> and produce a single <strong>20-bit number as output</strong>.</p>
<p>Your ALU will <strong>use the switches</strong> as indicated below:</p>
<p>![An image of ten switches on an FPGA. The first four from the left are underlined in red as operand1, a 4 bit number. The next four are underlined as operand2, also 4 bits. The next switch (second from the right) is marked as the select switch.] (images/image12.png &quot;image_tooltip&quot;)</p>
<p>The select switch will dictate whether the ALU operation is an <strong>addition</strong> (i.e. when <code>select</code> is HIGH, output <strong>operand1 + operand2</strong>) or a left-shift (when <code>select</code> is LOW, output <strong>operand1 &lt;&lt; operand2</strong>). There’s a commonly used hardware block (and a related Verilog construct) that allows you to select between two or more values based on a boolean condition; do you remember what it is? (Hint: It was mentioned in the lecture!)</p>
<p>The file <code>miniALU.sv</code> contains skeleton code including a module declaration and an empty <code>always_comb</code> construct, which we use to describe a combinational circuit.. Your task is to declare the module’s ports and fill out the <code>always</code> block to complete the module.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-the-testbench-again">1.2 The Testbench (again)<a href="#12-the-testbench-again" class="hash-link" aria-label="Direct link to 1.2 The Testbench (again)" title="Direct link to 1.2 The Testbench (again)">​</a></h3>
<p>I hope you didn’t think we’d let you get away without writing a testbench! Here, we’ll modify our testbench from earlier to test our ALU module. Consider the following:</p>
<ul>
<li>You will have more regs in this testbench because the module being tested takes in more inputs.</li>
<li>It won’t suffice to simply test a couple cases – after all, your ALU has two modes and many more combinations of operands. You could code in tons of cases manually, but there’s an easier way: the Verilog <code>for</code>-loop!</li>
</ul>
<div class="language-verilog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-verilog codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token keyword" style="color:rgb(12, 150, 155)">integer</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">16</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(12, 150, 155)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">begin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token number" style="color:rgb(170, 9, 130)">#5</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// simulation delay</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">/* YOUR CODE HERE */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Consider using this as a template to write a for-loop that iterates through a large set of test-cases.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-twas-segment-to-be">2 ‘Twas Segment to Be<a href="#2-twas-segment-to-be" class="hash-link" aria-label="Direct link to 2 ‘Twas Segment to Be" title="Direct link to 2 ‘Twas Segment to Be">​</a></h2>
<p>In this part of the lab, you will implement a seven-segment decoder. In other words, your module will take as <strong>input a 20-bit number</strong> and produce as <strong>output a set of 8-bit numbers</strong> indicating the values of each segment of each digit. We’ll break this task down into two modules.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-the-seven-segment-digit">2.1 The Seven-Segment Digit<a href="#21-the-seven-segment-digit" class="hash-link" aria-label="Direct link to 2.1 The Seven-Segment Digit" title="Direct link to 2.1 The Seven-Segment Digit">​</a></h3>
<p>Each digit of the seven-segment display of the FPGA requires 8 bits to drive: 7 bits for the segments and an additional bit for the decimal point. This module, which we’ll call <code>sevenSegDigit</code>, accepts a <strong>4-bit number</strong> and a <strong>1-bit on/off switch as input</strong> and <strong>output an 8-bit number</strong> for the segments.</p>
<p><img loading="lazy" alt="A picture of a seven-segment display unit in the shape of an 8. 0 represents the top segment, 1 represents the top right segment, 2 represents the bottom right segment, 3 represents the bottom segment, 4 represents the bottom left segment, 5 represents the bottom right segment, and 6 represents the middle segment." src="/assets/images/image11-6df01097a6ddc57ba9a852a6eb4c070e.png" width="306" height="460" class="img_ev3q"></p>
<p>The segments in each digit are represented by the picture shown here. In other words, “bit 0” (i.e. the LSB) in your 8-bit number should represent the top segment, bit 1 should represent the top-right, etc. Pay careful attention to your indexing when you assign to these segments.</p>
<p>Also note that the segments are active-low, meaning that a value of <strong>1 will turn the segment off</strong> and <strong>0 will turn it on</strong>. This is a very common source of errors!</p>
<p>This module’s logic is simple: there are 10 digits, each one mapping to a distinct set of segments. Therefore, you can use a construct called a <strong><code>case</code>-statement</strong> that looks like the <code>switch-case</code> statement you might have seen in other programming languages. Your case statement will compare the input to each of the 10 digits and produce a “default” output if none of them match – <strong>this is required</strong>.</p>
<p>Since we’re no longer working with simple operations or <code>assign</code> statements, you will need an <code>always</code> construct to contain your combinational logic. The skeleton code in <code>sevenSegDigit.sv</code> contains an <code>always</code> construct and some <code>case</code>-statement syntax. Your task now is to <strong>complete this module</strong> by adding a module declaration, port list, and finished <code>case</code>-statement. When finished, it should correctly output the seven-segment bits for any input number from 0 to 9. If the on/off switch is off, all of the segments should be unlit.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-the-seven-segment-display">2.2 The Seven-Segment Display<a href="#22-the-seven-segment-display" class="hash-link" aria-label="Direct link to 2.2 The Seven-Segment Display" title="Direct link to 2.2 The Seven-Segment Display">​</a></h3>
<p>Of course, one digit alone doesn’t accomplish very much because most numbers are more than one digit. Therefore, we will now write a module that <strong>decodes a much larger 20-bit number</strong> into 6 sets of segments. As before, a skeleton file has been provided – <code>sevenSegDisplay.sv</code>.</p>
<p>The logic for this module is simple because you’ve already written the decoder for one individual digit. You don’t have to write that logic again; you can simply instantiate a few copies of that module to decode each of the 6 digits in the number.</p>
<p>That being said, your focus for this module is implementing a <strong>circuit that converts a 20-bit number into six 4-bit numbers</strong>, one for each digit. Then, you should use <code>sevenSegDigit</code> to convert these 4-bit numbers into the <strong>8-bit segment arrays</strong>; <strong>these will be your outputs</strong>. How might you do this? Think about the arithmetic operators you have available to you in Verilog and which ones are useful for extracting digits from a number.</p>
<p>Finally, you need to instantiate this module in <code>miniALU_top</code> and wire up the ports as follows:</p>
<ul>
<li>The first operand input to the mini ALU is the first 4 switches (as labeled in the image from earlier).</li>
<li>The second operand input to the mini ALU is the second 4 switches (as labeled in the image from earlier).</li>
<li>The “mode” select input to the mini ALU is the ninth switch (as labeled in the image from earlier).</li>
<li>The 20-bit number input to the seven-segment display module is the output of the mini ALU.</li>
<li>The on/off switch input to the seven-segment display is the 10th (unused) switch on the FPGA.</li>
<li>The output of the seven-segment display module is the output of the top level module (which gets mapped to the segmented display on the FPGA).</li>
</ul>
<p>This will also require you to pin-plan! When it’s all done, you should be able to use the switches to display your calculation results on the FPGA. <strong>Don’t delete your earlier LED code when doing this!</strong> Your modules are allowed to have more than one output.</p>
<p>The end result will be your FPGA displaying the switches’ values on the LEDs and the mathematical result on the seven-segment display. Changing the switches should immediately change the displayed number, as should toggling the 9th switch to change the mathematical operation; and toggling that very last switch should turn the display on or off.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/UCLA-IEEE/projects.ieeebruins.com/tree/main/docs/DAV/lab-1.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/DAV/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">DAV</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/DAV/lab-2"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Lab 2</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#cooking-math" class="table-of-contents__link toc-highlight">Cooking Math</a></li><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#resources-and-reference-material" class="table-of-contents__link toc-highlight">Resources and Reference Material</a></li><li><a href="#contact-us" class="table-of-contents__link toc-highlight">Contact Us</a></li><li><a href="#0-your-first-module" class="table-of-contents__link toc-highlight">0 Your First Module</a><ul><li><a href="#01-the-top-level" class="table-of-contents__link toc-highlight">0.1 The Top Level</a></li><li><a href="#02-the-testbench" class="table-of-contents__link toc-highlight">0.2 The Testbench</a></li><li><a href="#03-pin-planning" class="table-of-contents__link toc-highlight">0.3 Pin Planning</a></li></ul></li><li><a href="#1-is-that-alu-can-say" class="table-of-contents__link toc-highlight">1 Is That ALU Can Say?</a><ul><li><a href="#11-the-mini-alu" class="table-of-contents__link toc-highlight">1.1 The (mini) ALU</a></li><li><a href="#12-the-testbench-again" class="table-of-contents__link toc-highlight">1.2 The Testbench (again)</a></li></ul></li><li><a href="#2-twas-segment-to-be" class="table-of-contents__link toc-highlight">2 ‘Twas Segment to Be</a><ul><li><a href="#21-the-seven-segment-digit" class="table-of-contents__link toc-highlight">2.1 The Seven-Segment Digit</a></li><li><a href="#22-the-seven-segment-display" class="table-of-contents__link toc-highlight">2.2 The Seven-Segment Display</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More of us!</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/RREtsea" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://instagram.com/uclaieee" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2025 IEEE at UCLA. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>